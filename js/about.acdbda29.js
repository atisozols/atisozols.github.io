"use strict";(self["webpackChunkgymadmin"]=self["webpackChunkgymadmin"]||[]).push([[443],{240:function(t,n,a){a.r(n),a.d(n,{default:function(){return k}});var e=a(252),i=a(577);const s=t=>((0,e.dD)("data-v-7f33fd0c"),t=t(),(0,e.Cn)(),t),o={class:"title"},d=s((()=>(0,e._)("br",null,null,-1))),l=s((()=>(0,e._)("span",{class:"title__name"},"skultes",-1))),p=s((()=>(0,e._)("br",null,null,-1))),u=s((()=>(0,e._)("span",{class:"title__gym"},"gym",-1))),r={key:1},h={ref:"bottom"};function m(t,n,a,s,m,c){const g=(0,e.up)("LoadingSpinner"),y=(0,e.up)("AppointmentList"),_=(0,e.up)("InputForm");return(0,e.wg)(),(0,e.iD)("div",{class:(0,i.C_)(["admin",{hidden:this.loading}])},[(0,e._)("button",{onClick:n[0]||(n[0]=(...t)=>c.logout&&c.logout(...t)),class:(0,i.C_)(["sign-out",{hidden:this.loading}])},"×",2),(0,e._)("h1",o,[(0,e._)("span",{class:(0,i.C_)(["title__admin",{hidden:this.loading}])},"admin",2),d,l,p,u]),this.loading?((0,e.wg)(),(0,e.j4)(g,{key:0})):((0,e.wg)(),(0,e.iD)("div",r,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(this.availableDates,((t,n)=>((0,e.wg)(),(0,e.j4)(y,{appointments:c.todaysAppointments(n),date:t.date_short,day:t.day_text},null,8,["appointments","date","day"])))),256)),(0,e.Wm)(_,{appointments:this.appointments},null,8,["appointments"])])),(0,e._)("span",h,null,512)],2)}var c=a(997),g=a(158),y=a(425),_=a(77),D=a(669),v=a(100),f={name:"HomeView",components:{AppointmentList:c.Z,LoadingSpinner:y.Z,InputForm:g.Z},data(){return{auth:null,appointments:[],loading:!0,date:"",day:"",dayDict:{Monday:"Pirmdien",Tuesday:"Otrdien",Wednesday:"Trešdien",Thursday:"Ceturtdien",Friday:"Piektdien",Saturday:"Sestdien",Sunday:"Svētdien"}}},mounted(){this.auth=(0,D.v0)(),(0,D.Aj)(this.auth,(t=>{t||this.$router.push("/login")})),console.log("bang"),this.loadAppointments()},methods:{async loadAppointments(t=this.availableDates[0].value){this.loading=!0;const n=(0,v.IO)(this.appointmentsCollection,(0,v.ar)("date",">=",t),(0,v.Xo)("date"),(0,v.Xo)("start_index")),a=await(0,v.PL)(n);this.appointments=[],a.forEach((t=>{this.appointments.push(t.data())})),this.loading=!1},todaysAppointments(t){const n=[];for(const a of this.appointments)this.availableDates[t].value==a.date&&n.push(a);return n},logout(){this.loading=!0,setTimeout((()=>{(0,D.w7)(this.auth)}),1500)}},computed:{availableDates(){const t=new Date,n=new Date(t),a=t.getDay(),e=0===a?6:a-1;n.setDate(t.getDate()-e);const i=[];for(let s=0;s<7;s++){const t=new Date(n);t.setDate(n.getDate()+s);const a=t.toLocaleString("en-US",{weekday:"long"}),e=t.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),[o,d,l]=e.split("/"),p=parseInt(l+o+d),u=l+"-"+o+"-"+d,r=`${d}/${o}`;i.push({day_text:this.dayDict[a],date_short:r,date:u,value:p})}return i},appointmentsCollection(){return(0,v.hJ)(_.Z,"appointments")}}},w=a(744);const b=(0,w.Z)(f,[["render",m],["__scopeId","data-v-7f33fd0c"]]);var k=b}}]);
//# sourceMappingURL=about.acdbda29.js.map